import{a as D,r as s,u as A,b as o,j as e,L as b}from"./app-CNGjdSTo.js";import{P as F,D as L}from"./data-table-B-d46U5A.js";import{a as x,A as B,g as R,F as P}from"./app-layout-Yr-265i6.js";import{l as p}from"./lodash-5o5Z8jMX.js";import M from"./BarangKeluarDetail-CgnoTTeI.js";import{C as O,i as l,E as U,P as $,T as G}from"./menu-DpZ89LzO.js";import{P as H}from"./printer-AIO-_U9k.js";import{E as V}from"./eye-BUWUaXK2.js";import{z as W}from"./transition-DBvexxdc.js";/* empty css            */import"./button-BxtkxcwU.js";import"./index-Cmwdccs3.js";import"./search-CghRPlTX.js";import"./createLucideIcon-BNUT-dRz.js";import"./index-BPuxuOo8.js";import"./index-DMsz7JPz.js";import"./x-B8MTmYU5.js";import"./with-selector-Ai6S-cA_.js";function ue(){const{auth:k,filters:n,barangKeluar:u,kategoriOptions:f,lokasiOptions:j}=D().props,[v,m]=s.useState(!1),[w,g]=s.useState(null),[d,N]=s.useState(!0),y=u.data||[],z=u.links||[],_=a=>{g(a),m(!0)},C=()=>{m(!1),g(null)},c=k.permissions||[],{data:t,setData:i,reset:E}=A({tanggal:n?.tanggal||"",kategori_id:n?.kategori_id||"",lokasi_id:n?.lokasi_id||"",search:n?.search||"",sort:n?.sort||"terbaru",per_page:n?.per_page||10});s.useCallback(p.debounce(a=>{o.get(route("barang-keluar.index"),{...t,search:a},{preserveState:!0,preserveScroll:!0,replace:!0})},400),[t]),s.useCallback(()=>{o.get(route("barang-keluar.index"),t,{preserveState:!0,preserveScroll:!0,replace:!0})},[t]);const h=s.useCallback(p.debounce(()=>{o.get(route("barang-keluar.index"),t,{preserveState:!0,preserveScroll:!0})},400),[t]);s.useEffect(()=>{h()},[t.tanggal,t.kategori_id,t.lokasi_id,t.sort,t.per_page,t.search,h]);const S=c.includes(x.CREATE_BARANG_KELUAR),T=c.includes(x.EDIT_BARANG_KELUAR),I=c.includes(x.DELETE_BARANG_KELUAR),K=[{header:"Tanggal",accessorKey:"tanggal",className:"w-[150px]"},{header:"Merek/Model",cell:a=>{const r=a.details[0];return e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-slate-900 dark:text-white",children:[r?.barang?.model_barang?.merek?.nama||""," ",r?.barang?.model_barang?.nama||"(Tidak ada barang)"]}),a.details.length>1&&e.jsxs("span",{className:"text-[10px] text-slate-500 italic",children:["(+",a.details.length-1," lainnya)"]})]})}},{header:"Kategori",cell:a=>a.details[0]?.barang?.model_barang?.kategori?.nama||"-"},{header:"Tujuan",accessorKey:"lokasi",cell:a=>a.lokasi?.nama||"-"}];return e.jsxs(B,{children:[e.jsx("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-6 dark:bg-zinc-950",children:e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-white",children:"Barang Keluar"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Daftar barang yang keluar dari inventori"})]}),S&&e.jsxs(b,{href:"/barang-keluar/create",className:"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition-all hover:bg-blue-700 hover:shadow-md focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-zinc-950",children:[e.jsx(F,{className:"h-4 w-4"}),"Tambah Barang Keluar"]})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm dark:border-zinc-800 dark:bg-zinc-900",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h2",{className:"inline-block rounded bg-slate-100 px-2 py-1 text-sm font-semibold tracking-wide text-slate-900 dark:bg-zinc-800 dark:text-white",children:"FILTERS"})}),e.jsx("button",{onClick:()=>N(!d),className:"flex items-center gap-1 rounded-md px-2 py-1 text-sm font-medium text-slate-500 transition-colors hover:bg-slate-100 hover:text-slate-700 dark:text-slate-400 dark:hover:bg-zinc-800 dark:hover:text-slate-300",children:d?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Sembunyikan"})]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Tampilkan"})]})})]}),d&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Tanggal"}),e.jsx("input",{type:"date",value:t.tanggal,onChange:a=>i("tanggal",a.target.value),className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Kategori"}),e.jsxs("select",{value:t.kategori_id,onChange:a=>i("kategori_id",a.target.value),className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",children:[e.jsx("option",{value:"",children:"Semua Kategori"}),f.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Lokasi / Tujuan"}),e.jsxs("select",{value:t.lokasi_id,onChange:a=>i("lokasi_id",a.target.value),className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",children:[e.jsx("option",{value:"",children:"Semua Lokasi"}),j.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Urutkan"}),e.jsxs("select",{value:t.sort,onChange:a=>i("sort",a.target.value),className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",children:[e.jsx("option",{value:"terbaru",children:"Terbaru"}),e.jsx("option",{value:"terlama",children:"Terlama"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Item per Halaman"}),e.jsxs("select",{value:t.per_page,onChange:a=>i("per_page",a.target.value),className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",children:[e.jsx("option",{value:10,children:"10 Data"}),e.jsx("option",{value:25,children:"25 Data"}),e.jsx("option",{value:50,children:"50 Data"}),e.jsx("option",{value:100,children:"100 Data"})]})]}),e.jsx("div",{className:"flex items-end sm:col-span-1 lg:col-span-3",children:e.jsx("button",{type:"button",onClick:()=>{E(),o.get(route("barang-keluar.index"))},className:"rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 hover:text-slate-900 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700",children:"Reset Filter"})})]})]}),e.jsx(L,{data:y,columns:K,links:z,searchPlaceholder:"Cari serial, brand, model...",initialSearch:t.search,onSearch:a=>i("search",a),actionWidth:"w-[100px]",actions:a=>e.jsx("div",{className:"flex justify-center",children:e.jsxs(l,{as:"div",className:"relative inline-block text-left",children:[e.jsx(l.Button,{className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-white text-slate-400 shadow-sm ring-1 ring-slate-200 hover:text-slate-600 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none dark:bg-zinc-800 dark:ring-zinc-700 dark:hover:text-slate-300",children:e.jsx(U,{className:"h-5 w-5","aria-hidden":"true"})}),e.jsx(W,{as:s.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsx(l.Items,{className:"ring-opacity-5 absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-lg bg-white py-1 shadow-lg ring-1 ring-black focus:outline-none dark:bg-zinc-900 dark:ring-zinc-800",children:e.jsxs("div",{className:"py-1",children:[e.jsx(l.Item,{children:({active:r})=>e.jsxs("a",{href:route("barang-keluar.cetak-surat",a.id),target:"_blank",rel:"noopener noreferrer",className:`${r?"bg-slate-50 text-slate-900 dark:bg-zinc-800 dark:text-white":"text-slate-700 dark:text-slate-300"} group flex w-full items-center px-4 py-2 text-xs`,children:[e.jsx(P,{className:"mr-3 h-4 w-4 text-slate-400"}),"Cetak Surat"]})}),e.jsx(l.Item,{children:({active:r})=>e.jsxs("a",{href:route("barang-keluar.cetak-label",a.id),target:"_blank",rel:"noopener noreferrer",className:`${r?"bg-slate-50 text-slate-900 dark:bg-zinc-800 dark:text-white":"text-slate-700 dark:text-slate-300"} group flex w-full items-center px-4 py-2 text-xs`,children:[e.jsx(H,{className:"mr-3 h-4 w-4 text-slate-400"}),"Cetak Label"]})}),e.jsx("div",{className:"my-1 border-t border-slate-100 dark:border-zinc-700"}),e.jsx(l.Item,{children:({active:r})=>e.jsxs("button",{onClick:()=>_(a),className:`${r?"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"text-slate-700 dark:text-slate-300"} flex w-full items-center gap-2 px-4 py-2 text-sm`,children:[e.jsx(V,{className:"h-4 w-4"}),"Lihat Detail"]})}),T&&e.jsx(l.Item,{children:({active:r})=>e.jsxs(b,{href:route("barang-keluar.edit",a.id),className:`${r?"bg-orange-50 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300":"text-slate-700 dark:text-slate-300"} flex w-full items-center gap-2 px-4 py-2 text-sm`,children:[e.jsx($,{className:"h-4 w-4"}),"Edit Data"]})}),I&&e.jsx(l.Item,{children:({active:r})=>e.jsxs("button",{onClick:()=>{confirm("Apakah Anda yakin ingin menghapus data ini?")&&o.delete(route("barang-keluar.destroy",a.id))},className:`${r?"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-300":"text-red-600 dark:text-red-400"} flex w-full items-center gap-2 px-4 py-2 text-sm`,children:[e.jsx(G,{className:"h-4 w-4"}),"Hapus Data"]})})]})})})]})})})]})}),e.jsx(M,{show:v,onClose:C,barangKeluar:w})]})}export{ue as default};
