import{a as A,r as i,u as D,j as e,L as h,b as x}from"./app-CNGjdSTo.js";import{P as E,D as B}from"./data-table-B-d46U5A.js";import{a as p,A as F,g as I}from"./app-layout-Yr-265i6.js";import K from"./barang-masuk-detail-C0mWtlyT.js";import{C as O,i as o,E as P,P as R,T as L}from"./menu-DpZ89LzO.js";import{E as U}from"./eye-BUWUaXK2.js";import{z as G}from"./transition-DBvexxdc.js";/* empty css            */import"./button-BxtkxcwU.js";import"./index-Cmwdccs3.js";import"./search-CghRPlTX.js";import"./createLucideIcon-BNUT-dRz.js";import"./index-BPuxuOo8.js";import"./index-DMsz7JPz.js";import"./x-B8MTmYU5.js";import"./with-selector-Ai6S-cA_.js";function $(d,r){let n;return function(...c){clearTimeout(n),n=setTimeout(()=>d(...c),r)}}function ie(){const{auth:d,filters:r,barangMasuk:n,kategoriOptions:c,asalOptions:k,merekOptions:f}=A().props,j=n.data||n,v=n.links||[],m=d.permissions||[],[w,g]=i.useState(!1),[N,y]=i.useState(null),[u,_]=i.useState(!0),{data:t,setData:l,reset:z}=D({tanggal:r?.tanggal||"",kategori_id:r?.kategori_id||"",asal_barang_id:r?.asal_barang_id||"",merek:r?.merek||"",search:r?.search||"",sort_by:r?.sort_by||"desc",per_page:r?.per_page||10,page:r?.page||1}),T=a=>{fetch(route("barang-masuk.show",a.id),{headers:{Accept:"application/json","Content-Type":"application/json"}}).then(s=>{if(!s.ok)throw new Error("Network response was not ok "+s.statusText);return s.json()}).then(s=>{y(s.barangMasuk),g(!0)}).catch(s=>{console.error("Gagal mengambil data detail:",s)})},b=i.useCallback(()=>{$(()=>{x.get(route("barang-masuk.index"),t,{preserveState:!0,preserveScroll:!0})},400)()},[t]);i.useEffect(()=>{b()},[t.tanggal,t.kategori_id,t.asal_barang_id,t.merek,t.search,t.sort_by,t.per_page,b]);const C=m.includes(p.CREATE_BARANG_MASUK),M=m.includes(p.EDIT_BARANG_MASUK),S=[{header:"Tanggal",accessorKey:"tanggal",className:"w-[150px]"},{header:"Merek & Model",cell:a=>e.jsxs("div",{className:"font-medium text-slate-900 dark:text-white",children:[a.merek," ",a.model]})},{header:"Kategori",accessorKey:"kategori"},{header:"Asal Barang",accessorKey:"asal_barang"}];return e.jsx(F,{children:e.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-6 dark:bg-zinc-950",children:[e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-white",children:"Barang Masuk"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Daftar barang masuk inventory dan riwayatnya."})]}),C&&e.jsxs(h,{href:"/barang-masuk/create",className:"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition-all hover:bg-blue-700 hover:shadow-md focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-zinc-950",children:[e.jsx(E,{className:"h-4 w-4"}),"Tambah Barang Masuk"]})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm dark:border-zinc-800 dark:bg-zinc-900",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h2",{className:"inline-block rounded bg-slate-100 px-2 py-1 text-sm font-semibold tracking-wide text-slate-900 dark:bg-zinc-800 dark:text-white",children:"FILTERS"})}),e.jsx("button",{onClick:()=>_(!u),className:"flex items-center gap-1 rounded-md px-2 py-1 text-sm font-medium text-slate-500 transition-colors hover:bg-slate-100 hover:text-slate-700 dark:text-slate-400 dark:hover:bg-zinc-800 dark:hover:text-slate-300",children:u?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Sembunyikan"})]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Tampilkan"})]})})]}),u&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Tanggal Transaksi"}),e.jsx("input",{type:"date",value:t.tanggal,onChange:a=>l("tanggal",a.target.value),className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Kategori"}),e.jsxs("select",{value:t.kategori_id,onChange:a=>l("kategori_id",a.target.value),className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",children:[e.jsx("option",{value:"",children:"Semua Kategori"}),c.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Asal Barang"}),e.jsxs("select",{value:t.asal_barang_id,onChange:a=>l("asal_barang_id",a.target.value),className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",children:[e.jsx("option",{value:"",children:"Semua Asal"}),k.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Merek"}),e.jsxs("select",{value:t.merek,onChange:a=>l("merek",a.target.value),className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",children:[e.jsx("option",{value:"",children:"Semua Merek"}),f.map(a=>e.jsx("option",{value:a.nama,children:a.nama},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Urutkan"}),e.jsxs("select",{value:t.sort_by,onChange:a=>l("sort_by",a.target.value),className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",children:[e.jsx("option",{value:"desc",children:"Terbaru"}),e.jsx("option",{value:"asc",children:"Terlama"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Tampilan"}),e.jsxs("select",{value:t.per_page,onChange:a=>{l("per_page",a.target.value),l("page",1)},className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",children:[e.jsx("option",{value:"10",children:"10 Data"}),e.jsx("option",{value:"25",children:"25 Data"}),e.jsx("option",{value:"50",children:"50 Data"}),e.jsx("option",{value:"100",children:"100 Data"})]})]}),e.jsx("div",{className:"flex items-end sm:col-span-2 lg:col-span-2",children:e.jsx("button",{type:"button",onClick:()=>{z(),x.get(route("barang-masuk.index"))},className:"w-full rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 hover:text-slate-900 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700",children:"Reset Filter"})})]})]}),e.jsx(B,{data:j,columns:S,links:v,searchPlaceholder:"Cari serial, brand, model...",initialSearch:t.search,onSearch:a=>l("search",a),actionWidth:"w-[100px]",actions:a=>e.jsx("div",{className:"flex justify-center",children:e.jsxs(o,{as:"div",className:"relative inline-block text-left",children:[e.jsx(o.Button,{className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-white text-slate-400 shadow-sm ring-1 ring-slate-200 hover:text-slate-600 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none dark:bg-zinc-800 dark:ring-zinc-700 dark:hover:text-slate-300",children:e.jsx(P,{className:"h-5 w-5","aria-hidden":"true"})}),e.jsx(G,{as:i.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsxs(o.Items,{className:"ring-opacity-5 absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-lg bg-white py-1 shadow-lg ring-1 ring-black focus:outline-none dark:bg-zinc-900 dark:ring-zinc-800",children:[e.jsx(o.Item,{children:({active:s})=>e.jsxs("button",{onClick:()=>T(a),className:`${s?"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"text-slate-700 dark:text-slate-300"} flex w-full items-center gap-2 px-4 py-2 text-sm`,children:[e.jsx(U,{className:"h-4 w-4"}),"Lihat Detail"]})}),M&&e.jsx(o.Item,{children:({active:s})=>e.jsxs(h,{href:route("barang-masuk.edit",{barang_masuk:a.id}),className:`${s?"bg-orange-50 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300":"text-slate-700 dark:text-slate-300"} flex w-full items-center gap-2 px-4 py-2 text-sm`,children:[e.jsx(R,{className:"h-4 w-4"}),"Edit Data"]})}),e.jsx(o.Item,{children:({active:s})=>e.jsxs("button",{onClick:()=>{confirm("Apakah Anda yakin ingin menghapus data ini?")&&x.delete(route("barang-masuk.destroy",a.id))},className:`${s?"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-300":"text-red-600 dark:text-red-400"} flex w-full items-center gap-2 px-4 py-2 text-sm`,children:[e.jsx(L,{className:"h-4 w-4"}),"Hapus Data"]})})]})})]})})})]}),e.jsx(K,{show:w,onClose:()=>g(!1),barang:N})]})})}export{ie as default};
