import{a as A,r,u as T,b as n,j as e,L as B}from"./app-CNGjdSTo.js";import{P as L,D as F}from"./data-table-B-d46U5A.js";import{a as m,A as M,g as O}from"./app-layout-Yr-265i6.js";import{l as h}from"./lodash-5o5Z8jMX.js";import P from"./BarangKembaliDetail-HnfW5W4L.js";import{C as R,i as o,E as $,P as G,T as H}from"./menu-DpZ89LzO.js";import{E as U}from"./eye-BUWUaXK2.js";import{z as V}from"./transition-DBvexxdc.js";/* empty css            */import"./button-BxtkxcwU.js";import"./index-Cmwdccs3.js";import"./search-CghRPlTX.js";import"./createLucideIcon-BNUT-dRz.js";import"./index-BPuxuOo8.js";import"./index-DMsz7JPz.js";import"./x-B8MTmYU5.js";import"./with-selector-Ai6S-cA_.js";function ce(){const{auth:p,filters:l,barangKembali:x,kategoriOptions:k,lokasiOptions:f}=A().props,d=p.permissions||[],[j,g]=r.useState(!1),[v,u]=r.useState(null),[c,w]=r.useState(!0),N=x.data||[],y=x.links||[],_=a=>{u(a),g(!0)},z=()=>{g(!1),u(null)},E=a=>{n.get(`/barang-kembali/${a}/edit`)},{data:t,setData:i,reset:C}=T({tanggal:l?.tanggal||"",kategori_id:l?.kategori_id||"",lokasi_id:l?.lokasi_id||"",search:l?.search||"",sort:l?.sort||"terbaru",per_page:l?.per_page||10});r.useCallback(h.debounce(a=>{n.get(route("barang-kembali.index"),{...t,search:a},{preserveState:!0,preserveScroll:!0,replace:!0})},400),[t]),r.useCallback(()=>{n.get(route("barang-kembali.index"),t,{preserveState:!0,preserveScroll:!0,replace:!0})},[t]);const b=r.useCallback(h.debounce(()=>{n.get(route("barang-kembali.index"),t,{preserveState:!0,preserveScroll:!0})},400),[t]);r.useEffect(()=>{b()},[t.tanggal,t.kategori_id,t.lokasi_id,t.sort,t.per_page,t.search,b]);const I=d.includes(m.CREATE_BARANG_KEMBALI),S=d.includes(m.EDIT_BARANG_KEMBALI),D=d.includes(m.DELETE_BARANG_KEMBALI),K=[{header:"Tanggal",accessorKey:"tanggal",className:"w-[150px]"},{header:"Merek/Model",cell:a=>{const s=a.details&&a.details.length>0?a.details[0]:null;return e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-slate-900 dark:text-white",children:[s?.barang?.model_barang?.merek?.nama||""," ",s?.barang?.model_barang?.nama||"(Tidak ada barang)"]}),a.details.length>1&&e.jsxs("span",{className:"text-[10px] text-slate-500 italic",children:["(+",a.details.length-1," lainnya)"]})]})}},{header:"Kategori",cell:a=>(a.details&&a.details.length>0?a.details[0]:null)?.barang?.model_barang?.kategori?.nama||"-"},{header:"Asal Lokasi",cell:a=>a.lokasi?.nama||"-"},{header:"Kondisi",cell:a=>{const s=a.details&&a.details.length>0?a.details[0]:null;return e.jsx("span",{className:`inline-flex rounded-full px-2 py-0.5 text-xs font-medium ${s?.status_saat_kembali==="bagus"?"bg-green-100 text-green-800":s?.status_saat_kembali==="rusak"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:s?.status_saat_kembali||"-"})}}];return e.jsxs(M,{children:[e.jsx("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-6 dark:bg-zinc-950",children:e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-white",children:"Barang Kembali"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Daftar barang yang kembali ke inventori"})]}),I&&e.jsxs(B,{href:"/barang-kembali/create",className:"inline-flex items-center gap-2 rounded-lg bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition-all hover:bg-green-700 hover:shadow-md focus:ring-2 focus:ring-green-500 focus:ring-offset-2 dark:focus:ring-offset-zinc-950",children:[e.jsx(L,{className:"h-4 w-4"}),"Tambah Barang Kembali"]})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm dark:border-zinc-800 dark:bg-zinc-900",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h2",{className:"inline-block rounded bg-slate-100 px-2 py-1 text-sm font-semibold tracking-wide text-slate-900 dark:bg-zinc-800 dark:text-white",children:"FILTERS"})}),e.jsx("button",{onClick:()=>w(!c),className:"flex items-center gap-1 rounded-md px-2 py-1 text-sm font-medium text-slate-500 transition-colors hover:bg-slate-100 hover:text-slate-700 dark:text-slate-400 dark:hover:bg-zinc-800 dark:hover:text-slate-300",children:c?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Sembunyikan"})]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Tampilkan"})]})})]}),c&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Tanggal"}),e.jsx("input",{type:"date",value:t.tanggal,onChange:a=>i("tanggal",a.target.value),className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Kategori"}),e.jsxs("select",{value:t.kategori_id,onChange:a=>i("kategori_id",a.target.value),className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",children:[e.jsx("option",{value:"",children:"Semua Kategori"}),k.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Lokasi Asal"}),e.jsxs("select",{value:t.lokasi_id,onChange:a=>i("lokasi_id",a.target.value),className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",children:[e.jsx("option",{value:"",children:"Semua Lokasi"}),f.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Urutkan"}),e.jsxs("select",{value:t.sort,onChange:a=>i("sort",a.target.value),className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",children:[e.jsx("option",{value:"terbaru",children:"Terbaru"}),e.jsx("option",{value:"terlama",children:"Terlama"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Item per Halaman"}),e.jsxs("select",{value:t.per_page,onChange:a=>i("per_page",a.target.value),className:"block w-full rounded-lg border-slate-200 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30 dark:border-zinc-700 dark:bg-zinc-800 dark:text-white",children:[e.jsx("option",{value:10,children:"10 Data"}),e.jsx("option",{value:25,children:"25 Data"}),e.jsx("option",{value:50,children:"50 Data"}),e.jsx("option",{value:100,children:"100 Data"})]})]}),e.jsx("div",{className:"flex items-end sm:col-span-1 lg:col-span-3",children:e.jsx("button",{type:"button",onClick:()=>{C(),n.get(route("barang-kembali.index"))},className:"rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-50 hover:text-slate-900 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700",children:"Reset Filter"})})]})]}),e.jsx(F,{data:N,columns:K,links:y,searchPlaceholder:"Cari serial, brand, model...",initialSearch:t.search,onSearch:a=>i("search",a),actionWidth:"w-[100px]",actions:a=>e.jsx("div",{className:"flex justify-center",children:e.jsxs(o,{as:"div",className:"relative inline-block text-left",children:[e.jsx(o.Button,{className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-white text-slate-400 shadow-sm ring-1 ring-slate-200 hover:text-slate-600 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none dark:bg-zinc-800 dark:ring-zinc-700 dark:hover:text-slate-300",children:e.jsx($,{className:"h-5 w-5","aria-hidden":"true"})}),e.jsx(V,{as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsxs(o.Items,{className:"ring-opacity-5 absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-lg bg-white py-1 shadow-lg ring-1 ring-black focus:outline-none dark:bg-zinc-900 dark:ring-zinc-800",children:[e.jsx(o.Item,{children:({active:s})=>e.jsxs("button",{onClick:()=>_(a),className:`${s?"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"text-slate-700 dark:text-slate-300"} flex w-full items-center gap-2 px-4 py-2 text-sm`,children:[e.jsx(U,{className:"h-4 w-4"}),"Lihat Detail"]})}),S&&e.jsx(o.Item,{children:({active:s})=>e.jsxs("button",{onClick:()=>E(a.id),className:`${s?"bg-orange-50 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300":"text-slate-700 dark:text-slate-300"} flex w-full items-center gap-2 px-4 py-2 text-sm`,children:[e.jsx(G,{className:"h-4 w-4"}),"Edit Data"]})}),D&&e.jsx(o.Item,{children:({active:s})=>e.jsxs("button",{onClick:()=>{confirm("Apakah Anda yakin ingin menghapus data ini?")&&n.delete(route("barang-kembali.destroy",a.id))},className:`${s?"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-300":"text-red-600 dark:text-red-400"} flex w-full items-center gap-2 px-4 py-2 text-sm`,children:[e.jsx(H,{className:"h-4 w-4"}),"Hapus Data"]})})]})})]})})})]})}),e.jsx(P,{show:j,onClose:z,barangKembali:v})]})}export{ce as default};
